# determined by html parsing on 2011-04-11
# from http://cmsdaqweb.cms/local/daqview/cdaq/DAQ_ru_static.html
#
# list of groups of feds (adjusted manually)

fedBuilderGroups = [

    # Also contains RETRI
    { "name": "GT", "frlpc": "s1d06-25", "feds": [812, 813, 810] },

    # BPIX
    { "name": "BPIX", "frlpc": "s1d06-30", "feds": [0, 1, 2, 3, 4, 5, 6, 7] },

    # BPIX 
    { "name": "BPIX", "frlpc": "s1d06-30", "feds": [8, 9, 10, 11, 12, 13, 14, 15] },

    # BPIX 
    { "name": "BPIX", "frlpc": "s1d06-29", "feds": [16, 17, 18, 19, 20, 21, 22, 23] },

    # BPIX 
    { "name": "BPIX", "frlpc": "s1d06-29", "feds": [24, 25, 26, 27, 28, 29, 30, 31] },

    # CASTOR 
    { "name": "CASTOR", "frlpc": "s2d10-15", "feds": [690, 691, 692] },

    # CSC+ 
    { "name": "CSC+", "frlpc": "s1d06-31", "feds": [750, 751, 752, 753, 831, 832, 833, 834, 835, 836, 837, 838, 839, 841, 842, 843, 844, 845, 846, 847, 848, 849] },

    # CSC- 
    { "name": "CSC-", "frlpc": "s1d06-32", "feds": [754, 755, 756, 757, 851, 852, 853, 854, 855, 856, 857, 858, 859, 861, 862, 863, 864, 865, 866, 867, 868, 869] },

    # CSCTF 
    { "name": "CSCTF", "frlpc": "s1d06-10", "feds": [760, 890, 891, 892, 893, 894, 895, 896, 897, 898, 899, 900, 901] },

    # DT+, DT-, DT0 
    { "name": "DT", "frlpc": "s1d06-27", "feds": [773, 774, 770, 771, 772] },

    # DTTF 
    { "name": "DTTF", "frlpc": "s1d06-11", "feds": [780] },

    # EB+ 
    { "name": "EB+", "frlpc": "s2d10-02", "feds": [628, 629, 630, 631, 632, 633, 634, 635, 636] },

    # EB+ 
    { "name": "EB+", "frlpc": "s2d10-10", "feds": [637, 638, 639, 640, 641, 642, 643, 644, 645, 663] },

    # EB- 
    { "name": "EB-", "frlpc": "s2d10-03", "feds": [610, 611, 612, 613, 614, 615, 616, 617, 618] },

    # EB- 
    { "name": "EB-", "frlpc": "s2d10-11", "feds": [619, 620, 621, 622, 623, 624, 625, 626, 627, 662] },

    # where does fed 664 belong to ? appears several times
    # on the page...

    # EE+ 
    { "name": "EE+", "frlpc": "s2d10-09", "feds": [646, 647, 648, 649] },

    # EE+ 
    { "name": "EE+", "frlpc": "s2d10-09", "feds": [650, 651, 652, 653, 654, 664] },

    # EE- 
    { "name": "EE-", "frlpc": "s2d10-01", "feds": [601, 602, 603, 604] },

    # EE- 
    { "name": "EE-", "frlpc": "s2d10-01", "feds": [605, 606, 607, 608, 609, 661] },

    # ES+ 
    { "name": "ES+", "frlpc": "s1d06-14", "feds": [563, 564, 565, 566, 568] },

    # ES+ 
    { "name": "ES+", "frlpc": "s1d06-14", "feds": [570, 571, 572, 573, 574] },

    # ES+ 
    { "name": "ES+", "frlpc": "s1d06-15", "feds": [548, 549, 551, 553, 554] },

    # ES+ 
    { "name": "ES+", "frlpc": "s1d06-15", "feds": [555, 556, 557, 560, 561] },

    # ES- 
    { "name": "ES-", "frlpc": "s1d06-12", "feds": [520, 522, 523, 524, 525] },

    # ES- 
    { "name": "ES-", "frlpc": "s1d06-12", "feds": [529, 530, 531, 532] },

    # ES- 
    { "name": "ES-", "frlpc": "s1d06-13", "feds": [534, 535, 537, 539, 540] },

    # ES- 
    { "name": "ES-", "frlpc": "s1d06-13", "feds": [541, 542, 545, 546, 547] },

    # FPIX 
    { "name": "FPIX", "frlpc": "s1d06-28", "feds": [32, 33, 34, 35, 36, 37, 38, 39] },

    # GCT 
    { "name": "GCT", "frlpc": "s1d06-26", "feds": [745] },

    # HBHEa 
    { "name": "HBHEa", "frlpc": "s2d10-05", "feds": [700, 701, 702, 703, 704, 705] },

    # HBHEb 
    { "name": "HBHEb", "frlpc": "s2d10-04", "feds": [706, 707, 708, 709, 710, 711] },

    # HBHEc 
    { "name": "HBHEc", "frlpc": "s2d10-06", "feds": [712, 713, 714, 715, 716, 717] },

    # HF 
    { "name": "HF", "frlpc": "s2d10-07", "feds": [718, 719, 720, 721, 722, 723] },

    # HO 
    { "name": "HO", "frlpc": "s2d10-08", "feds": [724, 725, 726, 727, 728, 729, 730, 731] },

    # RPC 
    { "name": "RPC", "frlpc": "s1d06-24", "feds": [790, 791, 792, 793] },

    # SCAL 
    { "name": "SCAL", "frlpc": "s2d10-14", "feds": [735] },

    # TEC+ 
    { "name": "TEC+", "frlpc": "s1d06-21", "feds": [326, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355] },

    # TEC+ 
    { "name": "TEC+", "frlpc": "s1d06-21", "feds": [316, 317, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340] },

    # TEC+ 
    { "name": "TEC+", "frlpc": "s1d06-22", "feds": [284, 285, 286, 287, 288, 289, 290, 291, 318, 319, 320, 321, 322, 323, 324, 325] },

    # TEC+ 
    { "name": "TEC+", "frlpc": "s1d06-22", "feds": [260, 261, 262, 263, 264, 265, 266, 267, 292, 293, 294, 295, 296, 297, 298, 299] },

    # TEC+ 
    { "name": "TEC+", "frlpc": "s1d06-23", "feds": [268, 269, 270, 271, 272, 273, 274, 275, 300, 301, 302, 303, 304, 305, 306, 307] },

    # TEC+ 
    { "name": "TEC+", "frlpc": "s1d06-23", "feds": [276, 277, 278, 279, 280, 281, 282, 283, 308, 309, 310, 311, 312, 313, 314, 315] },

    # TEC- 
    { "name": "TEC-", "frlpc": "s1d06-07", "feds": [174, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203] },

    # TEC- 
    { "name": "TEC-", "frlpc": "s1d06-07", "feds": [164, 165, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188] },

    # TEC- 
    { "name": "TEC-", "frlpc": "s1d06-08", "feds": [166, 167, 168, 169, 170, 171, 172, 173, 204, 205, 206, 207, 208, 209, 210, 211] },

    # TEC- 
    { "name": "TEC-", "frlpc": "s1d06-08", "feds": [212, 213, 214, 215, 216, 217, 218, 219, 236, 237, 238, 239, 240, 241, 242, 243] },

    # TEC- 
    { "name": "TEC-", "frlpc": "s1d06-09", "feds": [220, 221, 222, 223, 224, 225, 226, 227, 244, 245, 246, 247, 248, 249, 250, 251] },

    # TEC- 
    { "name": "TEC-", "frlpc": "s1d06-09", "feds": [228, 229, 230, 231, 232, 233, 234, 235, 252, 253, 254, 255, 256, 257, 258, 259] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-01", "feds": [86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-01", "feds": [102, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-02", "feds": [50, 51, 52, 53, 54, 55, 56, 57] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-02", "feds": [58, 59, 60, 61] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-03", "feds": [62, 63, 64, 65, 66, 67, 68, 69] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-03", "feds": [70, 71, 72, 73] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-04", "feds": [149, 150, 151, 152, 153, 154, 155, 156] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-04", "feds": [157, 158, 159, 160, 161, 162, 163] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-05", "feds": [134, 135, 136, 137, 138, 139, 140, 141] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-05", "feds": [142, 143, 144, 145, 146, 147, 148] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-06", "feds": [74, 75, 76, 77, 78, 79, 80, 81, 118, 119, 120, 121, 122, 123, 124, 125] },

    # TIBTID 
    { "name": "TIBTID", "frlpc": "s1d06-06", "feds": [82, 83, 84, 85, 126, 127, 128, 129, 130, 131, 132, 133] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-16", "feds": [416, 417, 418, 419, 420, 421, 422, 423, 474, 475, 476, 477, 478, 479, 480, 481] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-16", "feds": [402, 403, 404, 405, 406, 424, 425, 426, 482, 483, 484, 485, 486, 487, 488, 489] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-17", "feds": [356, 357, 358, 359, 360, 361, 362, 363, 444, 445, 446, 447, 448, 449, 450, 451] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-17", "feds": [364, 365, 366, 367, 371, 372, 452, 453, 454, 455, 456, 457] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-18", "feds": [386, 387, 389, 390, 391, 392, 393, 430, 431, 432, 433, 434, 435, 436, 437] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-18", "feds": [394, 395, 396, 397, 398, 399, 400, 401, 438, 439, 440, 441, 442, 443] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-19", "feds": [376, 377, 407, 408, 409, 410, 411, 412, 458, 459, 460, 461, 462, 463, 464, 465] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-19", "feds": [378, 379, 380, 381, 382, 383, 384, 385, 466, 467, 468, 469, 470, 471, 472, 473] },

    # TOB 
    { "name": "TOB", "frlpc": "s1d06-20", "feds": [368, 369, 370, 373, 374, 375, 413, 414, 415, 427, 428, 429] },


    ]
#----------------------------------------------------------------------
# utility functions
#----------------------------------------------------------------------

def makeGroupExpressions(fedsToExclude = []):

    retval = []

    fedsToExclude = set(fedsToExclude)

    for line in fedBuilderGroups:
        retval.append(dict(label = line['name'] + " " + line['frlpc'],
                           expr = "+".join(["size%03d" % fed for fed in line['feds'] if not fed in fedsToExclude ]),
                           ))

    return retval
